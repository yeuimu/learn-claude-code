{
  "version": "s04",
  "title": "Subagents",
  "description": "Agent spawns a subagent for isolated subtask execution",
  "steps": [
    {
      "type": "user_message",
      "content": "Refactor the calculator: split into modules and add tests",
      "annotation": "Complex task suitable for delegation"
    },
    {
      "type": "assistant_text",
      "content": "I'll delegate the test writing to a subagent while I handle the refactoring.",
      "annotation": "Agent decides to split work using the Task tool"
    },
    {
      "type": "tool_call",
      "content": "Write unit tests for calc.py covering all 4 operations and edge cases like division by zero",
      "toolName": "task",
      "annotation": "Task tool spawns a subagent with its own isolated context"
    },
    {
      "type": "system_event",
      "content": "[Subagent spawned] Context: fresh messages[], same tools, scoped prompt",
      "annotation": "Subagent gets clean context -- no confusion from parent's conversation"
    },
    {
      "type": "tool_result",
      "content": "Created test_calc.py with 8 test cases. All passing.",
      "toolName": "task",
      "annotation": "Subagent completes and returns a summary to parent"
    },
    {
      "type": "tool_call",
      "content": "calc.py -> calc/operations.py, calc/cli.py",
      "toolName": "write_file",
      "annotation": "Parent continues with its own task: refactoring"
    },
    {
      "type": "tool_result",
      "content": "Files written successfully",
      "toolName": "write_file",
      "annotation": "Modules split"
    },
    {
      "type": "assistant_text",
      "content": "Refactored into calc/operations.py and calc/cli.py. Tests were written by a subagent and are all passing.",
      "annotation": "Context isolation prevents confusion between tasks"
    }
  ]
}
