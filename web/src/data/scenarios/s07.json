{
  "version": "s07",
  "title": "Tasks",
  "description": "Agent uses persistent file-based tasks with dependencies",
  "steps": [
    {
      "type": "user_message",
      "content": "Build a REST API with user auth, database, and deployment config",
      "annotation": "Multi-part task requiring dependency tracking"
    },
    {
      "type": "tool_call",
      "content": "create_task(\"Set up database schema\", deps=[])\ncreate_task(\"Implement user model\", deps=[1])\ncreate_task(\"Add auth endpoints\", deps=[2])\ncreate_task(\"Write deployment config\", deps=[3])",
      "toolName": "task_manager",
      "annotation": "TaskManager creates file-based tasks with explicit dependencies"
    },
    {
      "type": "tool_result",
      "content": "Created 4 tasks in .tasks/\n  #1 Set up database schema [ready]\n  #2 Implement user model [blocked by #1]\n  #3 Add auth endpoints [blocked by #2]\n  #4 Write deployment config [blocked by #3]",
      "toolName": "task_manager",
      "annotation": "Tasks persisted to .tasks/ directory as JSON files"
    },
    {
      "type": "tool_call",
      "content": "schema.sql\n---\nCREATE TABLE users (id SERIAL PRIMARY KEY, email TEXT UNIQUE, password_hash TEXT);",
      "toolName": "write_file",
      "annotation": "Working on task #1"
    },
    {
      "type": "tool_result",
      "content": "File written successfully",
      "toolName": "write_file",
      "annotation": "Schema created"
    },
    {
      "type": "tool_call",
      "content": "complete_task(1)",
      "toolName": "task_manager",
      "annotation": "Completing task #1 automatically unblocks task #2"
    },
    {
      "type": "tool_result",
      "content": "Task #1 completed. Task #2 is now ready.",
      "toolName": "task_manager",
      "annotation": "File-based persistence outlives process memory"
    },
    {
      "type": "assistant_text",
      "content": "Database schema is done. Moving to user model implementation.",
      "annotation": "Dependency graph ensures tasks execute in correct order"
    }
  ]
}
